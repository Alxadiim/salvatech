<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Demander un devis - Salva Tech</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
  <!-- Style personnalis√© -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg bg-primary-blue">
    <div class="container">
      <a class="navbar-brand text-white fw-bold fst-italic" href="index.html">
        <img src="images/logo.png" alt="Logo Salva Tech" height="50" class="me-2" />
        Salva Tech
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navMenu">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link text-white" href="index.html">Accueil</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="services.html">Services</a></li>
          <li class="nav-item"><a class="nav-link text-white active" href="devis.html">Devis</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="rendez-vous.html">Rendez-vous</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="FAQ.html">FAQ</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="index.html#contact">Contact</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Header -->
  <header class="hero-section text-white text-center d-flex align-items-center" style="height: 40vh;">
    <div class="container">
      <h1 class="display-5 fw-bold fst-italic">Demander un devis</h1>
      <p class="lead">D√©crivez vos besoins et recevez une estimation personnalis√©e</p>
    </div>
  </header>

  <!-- Calculateur de devis -->
  <section class="py-5 bg-light">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-10">
          <div class="calculator-card">
            <div class="text-center mb-5">
              <h2 class="text-primary-blue mb-2">üõí Choisissez vos services</h2>
              <p class="text-muted mb-2">Cliquez pour s√©lectionner</p>
              <div class="alert alert-info d-inline-flex align-items-center">
                <i class="fas fa-info-circle me-2"></i>
                <small><strong>Prix indicatifs</strong> - Le tarif final sera ajust√© selon vos besoins sp√©cifiques</small>
              </div>
            </div>
            
            <!-- Grille ultra-simple -->
            <div class="services-grid mb-4" id="services-grid">
              <!-- Services g√©n√©r√©s par JS -->
            </div>

                
            <!-- Aper√ßu des services s√©lectionn√©s -->
            <div class="selection-summary">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="mb-0">üìã Votre s√©lection</h5>
                <small class="text-muted">
                  <i class="fas fa-tag me-1"></i>Prix de d√©part
                </small>
              </div>
              <div id="selected-details" class="mb-3">
                <div class="no-selection">
                  <i class="fas fa-shopping-cart"></i>
                  <p>Aucun service s√©lectionn√©</p>
                  <small class="text-muted">Les prix affich√©s sont des tarifs de base</small>
                </div>
              </div>
            </div>
            
            <!-- Total -->
            <div class="total-card text-center">
              <div class="total-info">
                <span id="count">0</span> article(s) au total
              </div>
              <div class="total-price">
                <span id="total">0</span> FCFA
              </div>
              <div class="total-disclaimer">
                <small><i class="fas fa-calculator me-1"></i>Estimation de base - Devis personnalis√© gratuit</small>
              </div>
            </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Formulaire de devis -->
  <section class="py-5">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-8">
<form id="contact-form" method="POST">
  <input type="hidden" name="message" value="Demande de devis depuis la page devis.html">
  <input type="hidden" name="_next" value="https://alxadiim.github.io/salvatech/merci.html">

  <div class="mb-3">
    <label for="nom" class="form-label">Nom complet</label>
    <input type="text" class="form-control" id="nom" name="nom" required>
  </div>

  <div class="mb-3">
    <label for="email" class="form-label">Adresse e-mail</label>
    <input type="email" class="form-control" id="email" name="email" required>
  </div>

  <div class="mb-3">
    <label for="telephone" class="form-label">T√©l√©phone</label>
    <input type="tel" class="form-control" id="telephone" name="telephone">
  </div>

  <div class="mb-3">
    <label for="type" class="form-label">Type de service souhait√©</label>
    <select id="type" name="type" class="form-select">
      <option>Vente de mat√©riel</option>
      <option>Installation / Support</option>
      <option>D√©veloppement d‚Äôun syst√®me de gestion</option>
      <option>Formation</option>
      <option>Autre</option>
    </select>
  </div>

  <div class="mb-3">
    <label for="details" class="form-label">D√©tails du besoin</label>
    <textarea class="form-control" id="details" name="details" rows="5" placeholder="D√©crivez votre besoin ici..." required></textarea>
  </div>

  <div class="text-center">
    <button type="submit" class="btn btn-primary">Envoyer la demande</button>
  </div>
</form>

        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="py-3 text-white text-center bg-primary-blue">
    <p class="mb-0">&copy; 2025 Salva Tech. Tous droits r√©serv√©s.</p>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Scripts personnalis√©s -->
  <script src="script.js"></script>
  <!-- S√©lecteur ultra-simple -->
  <script src="simple-selector.js"></script>

  <!-- Script d'envoi -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById("contact-form");
      form.addEventListener("submit", async function(event) {
        event.preventDefault();
        
        const formData = new FormData(form);
        
        // Ajouter les services s√©lectionn√©s avec quantit√©s
        if (selector) {
          const services = selector.getSelectedServices();
          const total = document.getElementById('total').textContent;
          
          const servicesList = services.map(s => `${s.name} (x${s.quantity})`).join(', ');
          const detailedList = services.map(s => `${s.name}: ${s.quantity} √ó ${s.price.toLocaleString()} = ${(s.price * s.quantity).toLocaleString()} FCFA`).join('\n');
          
          formData.append('services_selected', servicesList);
          formData.append('services_detail', detailedList);
          formData.append('total_estimated', total + ' FCFA');
          formData.append('total_items', document.getElementById('count').textContent);
        }
        
        await fetch("https://formspree.io/f/meokgwon", {
          method: "POST",
          body: formData,
          headers: { 'Accept': 'application/json' }
        });

        window.location.href = "merci.html";
      });
    });
  </script>

  <!-- Bouton WhatsApp flottant -->
  <a href="https://wa.me/221772404848?text=Bonjour%20Salva%20Tech%2C%20j%27aimerais%20obtenir%20un%20devis%20personnalis%C3%A9." class="whatsapp-float" target="_blank" rel="noopener">
    <i class="fab fa-whatsapp"></i>
    <div class="whatsapp-tooltip">Devis rapide sur WhatsApp</div>
  </a>

</body>
</html>
