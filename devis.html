<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Demander un devis - Salva Tech</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
  <!-- Style personnalisÃ© -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg bg-primary-blue">
    <div class="container">
      <a class="navbar-brand text-white fw-bold fst-italic" href="index.html">
        <img src="images/logo.png" alt="Logo Salva Tech" height="50" class="me-2" />
        Salva Tech
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navMenu">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link text-white" href="index.html">Accueil</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="services.html">Services</a></li>
          <li class="nav-item"><a class="nav-link text-white active" href="devis.html">Devis</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="rendez-vous.html">Rendez-vous</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="FAQ.html">FAQ</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="index.html#contact">Contact</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Header -->
  <header class="hero-section text-white text-center d-flex align-items-center" style="height: 40vh;">
    <div class="container">
      <h1 class="display-5 fw-bold fst-italic">Demander un devis</h1>
      <p class="lead">DÃ©crivez vos besoins et recevez une estimation personnalisÃ©e</p>
    </div>
  </header>

  <!-- Calculateur de devis -->
  <section class="py-5 bg-light">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-10">
          <div class="calculator-card">
            <h3 class="text-center mb-4 text-primary-blue">
              <i class="fas fa-brain me-2"></i>Calculateur de Devis Intelligent
            </h3>
            
            <!-- SÃ©lection pays pour tarification rÃ©gionale -->
            <div class="row mb-4">
              <div class="col-md-6 mx-auto">
                <label for="country-select" class="form-label"><i class="fas fa-globe-africa me-2"></i>Pays de livraison</label>
                <select class="form-select" id="country-select" onchange="updateRegionalPricing()">
                  <option value="SN">ðŸ‡¸ðŸ‡³ SÃ©nÃ©gal</option>
                  <option value="GM">ðŸ‡¬ðŸ‡² Gambie (+15%)</option>
                  <option value="ML">ðŸ‡²ðŸ‡± Mali (+25%)</option>
                  <option value="GW">ðŸ‡¬ðŸ‡¼ GuinÃ©e-Bissau (+30%)</option>
                  <option value="MR">ðŸ‡²ðŸ‡· Mauritanie (+35%)</option>
                </select>
              </div>
            </div>
            
            <div id="quote-calculator">
              <div class="row">
                <div class="col-md-8">
                  <!-- Produits gÃ©nÃ©rÃ©s dynamiquement -->
                  <div class="services-grid" id="products-grid">
                    <!-- Le contenu sera gÃ©nÃ©rÃ© par intelligent-quote.js -->
                  </div>
                  
                  <!-- Recommandations intelligentes -->
                  <div id="recommendations-section" class="mt-4" style="display: none;">
                    <h5 class="text-primary-blue"><i class="fas fa-lightbulb me-2"></i>Recommandations</h5>
                    <div id="recommendations-grid" class="row">
                      <!-- Recommandations gÃ©nÃ©rÃ©es dynamiquement -->
                    </div>
                  </div>
                  
                  <!-- Packages dÃ©tectÃ©s -->
                  <div id="packages-section" class="mt-4" style="display: none;">
                    <h5 class="text-success"><i class="fas fa-gift me-2"></i>Packages Promotionnels DÃ©tectÃ©s</h5>
                    <div id="packages-list">
                          <h6>Formation personnalisÃ©e</h6>
                          <small>Ã€ partir de 35 000 FCFA</small>
                        </div>
                      </label>
                      <div id="quantity-container-formation" class="quantity-container">
                        <input type="number" id="quantity-formation" class="quantity-input" min="1" value="1">
                      </div>
                    </div>

                  </div>
                </div>
                
                <div class="col-md-4">
                  <div class="estimate-summary">
                    <h5 class="text-primary-blue mb-3">Estimation</h5>
                    <div class="total-section">
                      <div class="total-label">Total estimÃ© :</div>
                      <div class="total-amount">
                        <span id="estimated-total">0</span> FCFA
                      </div>
                    </div>
                    <div class="estimate-note">
                      <small>
                        <i class="fas fa-info-circle me-1"></i>
                        Prix indicatifs. Un devis prÃ©cis sera Ã©tabli aprÃ¨s Ã©valuation de vos besoins spÃ©cifiques.
                      </small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Formulaire de devis -->
  <section class="py-5">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-8">
<form id="contact-form" method="POST">
  <input type="hidden" name="message" value="Demande de devis depuis la page devis.html">
  <input type="hidden" name="_next" value="https://alxadiim.github.io/salvatech/merci.html">

  <div class="mb-3">
    <label for="nom" class="form-label">Nom complet</label>
    <input type="text" class="form-control" id="nom" name="nom" required>
  </div>

  <div class="mb-3">
    <label for="email" class="form-label">Adresse e-mail</label>
    <input type="email" class="form-control" id="email" name="email" required>
  </div>

  <div class="mb-3">
    <label for="telephone" class="form-label">TÃ©lÃ©phone</label>
    <input type="tel" class="form-control" id="telephone" name="telephone">
  </div>

  <div class="mb-3">
    <label for="type" class="form-label">Type de service souhaitÃ©</label>
    <select id="type" name="type" class="form-select">
      <option>Vente de matÃ©riel</option>
      <option>Installation / Support</option>
      <option>DÃ©veloppement dâ€™un systÃ¨me de gestion</option>
      <option>Formation</option>
      <option>Autre</option>
    </select>
  </div>

  <div class="mb-3">
    <label for="details" class="form-label">DÃ©tails du besoin</label>
    <textarea class="form-control" id="details" name="details" rows="5" placeholder="DÃ©crivez votre besoin ici..." required></textarea>
  </div>

  <div class="text-center">
    <button type="submit" class="btn btn-primary">Envoyer la demande</button>
  </div>
</form>

        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="py-3 text-white text-center bg-primary-blue">
    <p class="mb-0">&copy; 2025 Salva Tech. Tous droits rÃ©servÃ©s.</p>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Scripts personnalisÃ©s -->
  <script src="script.js"></script>
  <!-- SystÃ¨me de devis intelligent -->
  <script src="intelligent-quote.js"></script>

  <!-- Script d'envoi avec systÃ¨me intelligent -->
  <script>
    // Initialisation du systÃ¨me de devis intelligent
    document.addEventListener('DOMContentLoaded', function() {
      const quoteSystem = new IntelligentQuoteSystem();
      
      // Gestionnaire de soumission du formulaire
      const form = document.getElementById("contact-form");
      form.addEventListener("submit", async function(event) {
        event.preventDefault();
        
        // Calculer le devis avec les dÃ©tails
        const quoteData = quoteSystem.generateQuote();
        const formData = new FormData(form);
        
        // Ajouter les donnÃ©es du devis au formulaire
        formData.append('quote_details', JSON.stringify(quoteData));
        formData.append('total_amount', quoteData.total);
        formData.append('selected_country', quoteData.country);
        
        await fetch("https://formspree.io/f/meokgwon", {
          method: "POST",
          body: formData,
          headers: { 'Accept': 'application/json' }
        });

        window.location.href = "merci.html";
      });
    });
  </script>

  <!-- Bouton WhatsApp flottant -->
  <a href="https://wa.me/221772404848?text=Bonjour%20Salva%20Tech%2C%20j%27aimerais%20obtenir%20un%20devis%20personnalis%C3%A9." class="whatsapp-float" target="_blank" rel="noopener">
    <i class="fab fa-whatsapp"></i>
    <div class="whatsapp-tooltip">Devis rapide sur WhatsApp</div>
  </a>

</body>
</html>
